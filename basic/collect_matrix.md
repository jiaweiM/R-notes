# 矩阵

- [矩阵](#矩阵)
  - [简介](#简介)
  - [创建矩阵](#创建矩阵)
    - [matrix](#matrix)
    - [as.matrix](#asmatrix)
    - [is.matrix](#ismatrix)
  - [矩阵操作](#矩阵操作)
    - [对角元](#对角元)

2020-08-10, 10:30
***

## 简介

矩阵，实际上是一个长向量，只是在 R 内部处理时，作为多维分析。即矩阵是有维数的向量，矩阵元素类型需一致，可以是数值型、字符型或逻辑型。

## 创建矩阵

### matrix

`matrix` 函数使用指定值创建矩阵：

```r
matrix(data = NA, nrow = 1, ncol = 1, byrow = FALSE,
       dimnames = NULL)
```

参数说明：

1. data

提供数据的列表或向量。

2. nrow

行数

3. ncol

列数

4. byrow

是否按行填充。`FALSE` (default) 表示按列填充矩阵，否则按行填充。例如：

```r
> matrix(c(1, 2, 3, 4), 2, 2, byrow = TRUE)
     [,1] [,2]
[1,]    1    2
[2,]    3    4
```

5. dimnames

用于指定矩阵的行和列名称，NULL 或长度为 2 的列表。

- list 长度为 0 等价于 NULL
- list 长度为 1 对应行名
- list 也可以包含名称，对应 dimension 名称

```r
> m <- matrix(c(2, 4, 6, 1, 3, 8), nrow = 2, ncol = 3, byrow = TRUE)
> m
     [,1] [,2] [,3]
[1,]    2    4    6
[2,]    1    3    8
```

### as.matrix

`as.matrix` 尝试将其参数转换为矩阵。

```r
as.matrix(x, ...)
## S3 method for class 'data.frame'
as.matrix(x, rownames.force = NA, ...)
```

### is.matrix

`is.matrix` 尝试参数是否为矩阵。

```r
is.matrix(x)
```

## 矩阵操作

```r
> a <- matrix(1:9, nrow = 3)
> a
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6    9
```

取第1行和第二行的 2-3 列，用 `[1:2, 2:3]`，得到一个新的矩阵：

```r
> a[1:2, 2:3]
     [,1] [,2]
[1,]    4    7
[2,]    5    8
```

`[` 默认将获取的数据尽可能以低的维度呈现，比如：

```r
> a[1, 1:2]
[1] 1 4
```

表示第一行的前两列，此时不是 $1\times2$矩阵，而是包含两个元素的向量。

保留所有的行或列，例如选取1到2行的所有列，可以如下简写：

```r
> a[1:2, ]
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
```

即，省略掉对应位置的索引即可。

### 对角元

`diag(m)` 返回矩阵的对角元。
